(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{e8sf:function(t,o,r){"use strict";r.r(o),r.d(o,"VentasModule",function(){return B});var e=r("ofXK"),a=r("3Pt+"),b=r("tyNb"),i=r("R0Ic"),c=r("fXoL"),s=r("l7P3"),n=r("KNNI");function d(t,o){1&t&&c.Kb(0,"i",13)}function l(t,o){1&t&&c.Kb(0,"i",14)}let u=(()=>{class t{constructor(t){this._store=t,this.sidebarestado=!1,this._store.select("ui").subscribe(({sidebarEstado:t})=>{this.sidebarestado=t}),this._store.select("usuario").subscribe(({usuario:t})=>{this.usuario=t})}ngOnInit(){}cambiarEstadoSidebar(){this._store.dispatch(Object(n.a)({sidebarEstado:!this.sidebarestado}))}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(s.h))},t.\u0275cmp=c.Db({type:t,selectors:[["app-navbar"]],decls:14,vars:3,consts:[[1,"navbar","default-layout","col-sm-12","col-12","p-0","fixed-top","d-flex","flex-row"],[1,"text-center","navbar-brand-wrapper","d-flex","align-items-top","justify-content-center",3,"click"],[1,"navbar-brand","brand-logo"],["src","assets/images/logo.svg","alt","logo"],[1,"navbar-brand","brand-logo-mini"],["class","menu-icon fas fa-bars",4,"ngIf"],["class","menu-icon fas fa-times",4,"ngIf"],[1,"navbar-menu-wrapper","d-flex","align-items-center"],[1,"navbar-nav","navbar-nav-right"],[1,"profile-text"],[1,"nav-item","d-none","d-sm-inline-block"],["id","UserDropdown","href","#","data-toggle","dropdown","aria-expanded","false",1,"nav-link"],["src","assets/images/images.png","alt","Profile image",1,"img-xs","rounded-circle"],[1,"menu-icon","fas","fa-bars"],[1,"menu-icon","fas","fa-times"]],template:function(t,o){1&t&&(c.Mb(0,"nav",0),c.Mb(1,"div",1),c.Tb("click",function(){return o.cambiarEstadoSidebar()}),c.Mb(2,"a",2),c.Kb(3,"img",3),c.Lb(),c.Mb(4,"a",4),c.ec(5,d,1,0,"i",5),c.ec(6,l,1,0,"i",6),c.Lb(),c.Lb(),c.Mb(7,"div",7),c.Mb(8,"ul",8),c.Mb(9,"span",9),c.fc(10),c.Lb(),c.Mb(11,"li",10),c.Mb(12,"a",11),c.Kb(13,"img",12),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(5),c.Yb("ngIf",!o.sidebarestado),c.zb(1),c.Yb("ngIf",o.sidebarestado),c.zb(4),c.hc("Hello, ",null==o.usuario?null:o.usuario.nombre,""))},directives:[e.k],styles:[".navbar.default-layout[_ngcontent-%COMP%]   .navbar-brand-wrapper[_ngcontent-%COMP%]   .navbar-brand[_ngcontent-%COMP%]{color:#000!important}"]}),t})();var p=r("2Mxs");let f=(()=>{class t{constructor(t,o){this.router=t,this.store=o}ngOnInit(){}logout(){this.store.dispatch(p.b()),localStorage.removeItem("tokenStock"),this.router.navigate(["login"])}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(b.a),c.Jb(s.h))},t.\u0275cmp=c.Db({type:t,selectors:[["app-sidebar"]],decls:37,vars:0,consts:[[1,"sidebar","sidebar-offcanvas"],[1,"nav"],[1,"nav-item"],["routerLink","/",1,"nav-link"],[1,"menu-icon","fa","fa-clipboard-list"],[1,"menu-title"],["routerLink","/lista",1,"nav-link"],[1,"menu-icon","fas","fa-list"],["routerLink","/agregar",1,"nav-link"],[1,"menu-icon","fas","fa-plus-circle"],["routerLink","/venta-lista",1,"nav-link"],[1,"menu-icon","fas","fa-money-bill-alt"],["routerLink","/detalle",1,"nav-link"],[1,"menu-icon","fas","fa-chart-line"],["routerLink","/usuarios",1,"nav-link"],[1,"menu-icon","fas","fa-users"],[1,"nav-link","cursor",3,"click"],[1,"menu-icon","fa","fa-sign-out-alt"]],template:function(t,o){1&t&&(c.Mb(0,"nav",0),c.Mb(1,"ul",1),c.Mb(2,"li",2),c.Mb(3,"a",3),c.Kb(4,"i",4),c.Mb(5,"span",5),c.fc(6,"Registrar venta"),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"li",2),c.Mb(8,"a",6),c.Kb(9,"i",7),c.Mb(10,"span",5),c.fc(11,"Lista de productos"),c.Lb(),c.Lb(),c.Lb(),c.Mb(12,"li",2),c.Mb(13,"a",8),c.Kb(14,"i",9),c.Mb(15,"span",5),c.fc(16,"Agregar nuevo producto"),c.Lb(),c.Lb(),c.Lb(),c.Mb(17,"li",2),c.Mb(18,"a",10),c.Kb(19,"i",11),c.Mb(20,"span",5),c.fc(21,"Ver ventas"),c.Lb(),c.Lb(),c.Lb(),c.Mb(22,"li",2),c.Mb(23,"a",12),c.Kb(24,"i",13),c.Mb(25,"span",5),c.fc(26,"Balance"),c.Lb(),c.Lb(),c.Lb(),c.Mb(27,"li",2),c.Mb(28,"a",14),c.Kb(29,"i",15),c.Mb(30,"span",5),c.fc(31,"Usuarios"),c.Lb(),c.Lb(),c.Lb(),c.Mb(32,"li",2),c.Mb(33,"a",16),c.Tb("click",function(){return o.logout()}),c.Kb(34,"i",17),c.Mb(35,"span",5),c.fc(36,"Cerrar sesi\xf3n"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb())},directives:[b.b],styles:["li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}*[_ngcontent-%COMP%]{position:sticky}"]}),t})(),h=(()=>{class t{constructor(t){this._store=t,this.AbiertoCerrado=!0,this._store.select("ui").subscribe(({sidebarEstado:t})=>{this.AbiertoCerrado=t})}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(s.h))},t.\u0275cmp=c.Db({type:t,selectors:[["app-dashboard"]],decls:7,vars:1,consts:[[1,"page-body-wrapper"],[1,"main-panel"],[1,"content-wrapper"]],template:function(t,o){1&t&&(c.Kb(0,"app-navbar"),c.Mb(1,"div",0),c.Mb(2,"div"),c.Kb(3,"app-sidebar"),c.Lb(),c.Mb(4,"div",1),c.Mb(5,"div",2),c.Kb(6,"router-outlet"),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(2),c.Yb("@AbiertoCerrado",o.AbiertoCerrado?"abierto":"cerrado"))},directives:[u,f,b.d],styles:[""],data:{animation:[Object(i.j)("AbiertoCerrado",[Object(i.g)("abierto",Object(i.h)({opacity:1,display:"block"})),Object(i.g)("cerrado",Object(i.h)({opacity:0,display:"none"})),Object(i.i)("abierto => cerrado",[Object(i.e)(".3s")]),Object(i.i)("cerrado => abierto",[Object(i.e)(".3s")])])]}}),t})();var m=r("am9W"),M=r("tk/3");let L=(()=>{class t{constructor(t){this._http=t}traerTodos(){return this._http.get(`${m.a}/producto/`)}crearProducto(t){return this._http.post(`${m.a}/producto/agregar`,Object.assign({},t)).toPromise()}agregarGusto(t,o){return this._http.post(`${m.a}/producto/${t}/agregarGusto`,Object.assign({},o)).toPromise()}}return t.\u0275fac=function(o){return new(o||t)(c.Qb(M.b))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=r("dnLZ");function g(t,o){if(1&t&&(c.Mb(0,"option",23),c.fc(1),c.Lb()),2&t){const t=o.$implicit,r=c.Vb();c.Yb("selected",t.id==r.idProducto)("value",t.id),c.zb(1),c.ic("",t.marca,"- ",t.modelo,"")}}let k=(()=>{class t{constructor(t,o,r){this.fb=t,this.productoService=o,this.sweetService=r,this.productoForm=this.fb.group({marca:["",a.k.required],modelo:["",a.k.required],minorista:["",[a.k.required,a.k.minLength(1)]],mayorista:["",[a.k.required,a.k.minLength(1)]]}),this.gustoForm=this.fb.group({sabor:["",a.k.required],stock:["",a.k.required],costo:["",[a.k.required,a.k.minLength(1)]]})}ngOnInit(){this.traerProductos()}traerProductos(){this.productoService.traerTodos().subscribe(t=>{this.productos=t,this.idProducto=this.productos[0].id})}cambiarProducto(t){this.idProducto=t.target.value,console.log(this.idProducto)}crearProducto(){let t={};t.marca=this.productoForm.controls.marca.value,t.modelo=this.productoForm.controls.modelo.value,t.minorista=this.productoForm.controls.minorista.value,t.mayorista=this.productoForm.controls.mayorista.value,this.productoService.crearProducto(t).then(t=>{this.traerProductos(),this.productoForm.reset()}).catch(t=>this.sweetService.danger(t.error.msg))}agregarGusto(){let t={};t.sabor=this.gustoForm.controls.sabor.value,t.stock=this.gustoForm.controls.stock.value,t.costo=this.gustoForm.controls.costo.value,this.productoService.agregarGusto(this.idProducto,t).then(t=>{console.log(t),this.gustoForm.reset()}).catch(t=>this.sweetService.danger(t.error.msg))}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(a.c),c.Jb(L),c.Jb(v.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-agregar"]],decls:64,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"row","row-cols-auto"],[1,"col"],[1,"form-group"],["type","text","placeholder","Marca","name","marca","formControlName","marca",1,"form-control","input-placeholder"],["type","text","placeholder","Modelo","name","modelo","formControlName","modelo",1,"form-control","input-placeholder"],["type","number","placeholder","Precio minorista","name","minorista","formControlName","minorista",1,"form-control","input-placeholder"],["type","number","placeholder","Precio mayorista","name","mayorista","formControlName","mayorista",1,"form-control","input-placeholder"],[1,"card-footer"],[1,"text-center"],[1,"btn","btn-outline-primary","btn-block",3,"disabled","click"],[1,"card","mt-3"],["aria-label","Default select example",1,"form-select",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],["type","text","placeholder","Sabor","name","sabor","formControlName","sabor",1,"form-control","input-placeholder"],["type","number","placeholder","Stock","name","stock","formControlName","stock",1,"form-control","input-placeholder"],["type","number","placeholder","Costo","name","costo","formControlName","costo",1,"form-control","input-placeholder"],[1,"btn","btn-outline-success","btn-block",3,"disabled","click"],[3,"selected","value"]],template:function(t,o){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"div",0),c.Mb(3,"div",2),c.Mb(4,"div",3),c.Mb(5,"h4",4),c.fc(6,"Agregar Producto"),c.Lb(),c.Mb(7,"form",5),c.Mb(8,"div",6),c.Mb(9,"div",7),c.Mb(10,"div",8),c.Mb(11,"label"),c.fc(12,"Marca"),c.Lb(),c.Kb(13,"input",9),c.Lb(),c.Lb(),c.Mb(14,"div",7),c.Mb(15,"div",8),c.Mb(16,"label"),c.fc(17,"Modelo"),c.Lb(),c.Kb(18,"input",10),c.Lb(),c.Lb(),c.Mb(19,"div",7),c.Mb(20,"div",8),c.Mb(21,"label"),c.fc(22,"Precio minorista"),c.Lb(),c.Kb(23,"input",11),c.Lb(),c.Lb(),c.Mb(24,"div",7),c.Mb(25,"div",8),c.Mb(26,"label"),c.fc(27,"Precio mayorista"),c.Lb(),c.Kb(28,"input",12),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(29,"div",13),c.Mb(30,"div",14),c.Mb(31,"button",15),c.Tb("click",function(){return o.crearProducto()}),c.fc(32," Guardar"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(33,"div",16),c.Mb(34,"div",3),c.Mb(35,"h4",4),c.fc(36,"Agregar Sabor"),c.Lb(),c.Mb(37,"form",5),c.Mb(38,"div",6),c.Mb(39,"div",7),c.Mb(40,"div",8),c.Mb(41,"label"),c.fc(42,"Producto"),c.Lb(),c.Mb(43,"select",17),c.Tb("change",function(t){return o.cambiarProducto(t)}),c.ec(44,g,2,4,"option",18),c.Lb(),c.Lb(),c.Lb(),c.Mb(45,"div",7),c.Mb(46,"div",8),c.Mb(47,"label"),c.fc(48,"Sabor"),c.Lb(),c.Kb(49,"input",19),c.Lb(),c.Lb(),c.Mb(50,"div",7),c.Mb(51,"div",8),c.Mb(52,"label"),c.fc(53,"Stock"),c.Lb(),c.Kb(54,"input",20),c.Lb(),c.Lb(),c.Mb(55,"div",7),c.Mb(56,"div",8),c.Mb(57,"label"),c.fc(58,"Costo"),c.Lb(),c.Kb(59,"input",21),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(60,"div",13),c.Mb(61,"div",14),c.Mb(62,"button",22),c.Tb("click",function(){return o.agregarGusto()}),c.fc(63," Guardar "),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(7),c.Yb("formGroup",o.productoForm),c.zb(24),c.Yb("disabled",o.productoForm.invalid),c.zb(6),c.Yb("formGroup",o.gustoForm),c.zb(7),c.Yb("ngForOf",o.productos),c.zb(18),c.Yb("disabled",o.gustoForm.invalid))},directives:[a.m,a.g,a.e,a.b,a.f,a.d,a.i,e.j,a.h,a.l],styles:["input[_ngcontent-%COMP%]::placeholder{color:#bebaba}"]}),t})();function y(t,o){if(1&t){const t=c.Nb();c.Mb(0,"tr"),c.Mb(1,"th",9),c.fc(2),c.Lb(),c.Mb(3,"td"),c.fc(4),c.Lb(),c.Mb(5,"td"),c.fc(6),c.Lb(),c.Mb(7,"td"),c.fc(8),c.Lb(),c.Mb(9,"td"),c.fc(10),c.Lb(),c.Mb(11,"td"),c.fc(12),c.Lb(),c.Mb(13,"td"),c.fc(14),c.Lb(),c.Mb(15,"td"),c.fc(16),c.Lb(),c.Mb(17,"td"),c.fc(18),c.Lb(),c.Mb(19,"td"),c.fc(20),c.Lb(),c.Mb(21,"td"),c.Mb(22,"span",10),c.Mb(23,"i",11),c.Tb("click",function(){c.bc(t);const r=o.$implicit;return c.Vb().borrar(r)}),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=o.$implicit,r=o.index;c.zb(2),c.gc(r+1),c.zb(2),c.gc(t.marca),c.zb(2),c.hc(" ",t.modelo," "),c.zb(2),c.hc(" ",null==t.gusto?null:t.gusto.sabor," "),c.zb(2),c.hc(" ",null==t.gusto?null:t.gusto.stock," "),c.zb(2),c.hc(" ",null==t.gusto?null:t.gusto.costo," "),c.zb(2),c.hc(" ",t.mayorista," "),c.zb(2),c.hc(" ",t.minorista," "),c.zb(2),c.hc(" ",t.ganciaMayorista," "),c.zb(2),c.hc(" ",t.ganciaMinorista," ")}}let w=(()=>{class t{constructor(t,o){this.productosService=t,this.sweetService=o}ngOnInit(){this.traerTodos()}traerTodos(){this.productosService.traerTodos().toPromise().then(t=>{this.productos=t,this.armarArrayProductos()}).catch(t=>this.sweetService.danger(t.error.msg))}armarArrayProductos(){let t=[];this.productos.forEach(o=>{o.gustos.forEach(r=>{t.push(Object.assign(Object.assign({},o),{gusto:r,ganciaMayorista:o.mayorista-r.costo,ganciaMinorista:o.minorista-r.costo}))})}),this.productos=t}borrar(t){console.log(t)}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(L),c.Jb(v.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-lista"]],decls:35,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[2,"color","red"],[1,"text-rpimary","far","fa-trash-alt","fa-2x",3,"click"]],template:function(t,o){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"div",2),c.Mb(3,"div",3),c.Mb(4,"h4",4),c.fc(5,"Lista de productos"),c.Lb(),c.Mb(6,"div",0),c.Mb(7,"div",5),c.Mb(8,"table",6),c.Mb(9,"thead"),c.Mb(10,"tr"),c.Mb(11,"th",7),c.fc(12,"#"),c.Lb(),c.Mb(13,"th",7),c.fc(14,"Marca"),c.Lb(),c.Mb(15,"th",7),c.fc(16,"Modelo"),c.Lb(),c.Mb(17,"th",7),c.fc(18,"Sabor"),c.Lb(),c.Mb(19,"th",7),c.fc(20,"Stock"),c.Lb(),c.Mb(21,"th",7),c.fc(22,"Costo"),c.Lb(),c.Mb(23,"th",7),c.fc(24,"Precio mayorista"),c.Lb(),c.Mb(25,"th",7),c.fc(26,"Precio monorista"),c.Lb(),c.Mb(27,"th",7),c.fc(28,"Gancia mayorista"),c.Lb(),c.Mb(29,"th",7),c.fc(30,"Ganancia minorista"),c.Lb(),c.Mb(31,"th",7),c.fc(32,"Borrar"),c.Lb(),c.Lb(),c.Lb(),c.Mb(33,"tbody"),c.ec(34,y,24,10,"tr",8),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(34),c.Yb("ngForOf",o.productos))},directives:[e.j],styles:[""]}),t})();var S=r("on2l");function z(t,o){1&t&&c.Kb(0,"i",25)}function F(t,o){1&t&&c.Kb(0,"i",26)}function P(t,o){if(1&t){const t=c.Nb();c.Mb(0,"tr"),c.Mb(1,"th",27),c.fc(2),c.Lb(),c.Mb(3,"td"),c.fc(4),c.Lb(),c.Mb(5,"td"),c.fc(6),c.Lb(),c.Mb(7,"td"),c.Mb(8,"input",28),c.Tb("change",function(){c.bc(t);const r=o.$implicit;return c.Vb().cambiarAdmin(r)}),c.Lb(),c.Lb(),c.Mb(9,"td"),c.Mb(10,"span",29),c.Mb(11,"i",30),c.Tb("click",function(){c.bc(t);const r=o.$implicit;return c.Vb().borrar(r)}),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=o.$implicit;c.zb(2),c.gc(t.id),c.zb(2),c.gc(t.nombre),c.zb(2),c.hc(" ",t.usuario," "),c.zb(2),c.Yb("checked",t.esAdmin)}}let C=(()=>{class t{constructor(t,o,r){this.fb=t,this.usuaruiService=o,this._sweetService=r,this.tipoInput="password",this.usuarios=[],this.usuarioForm=this.fb.group({usuario:["",a.k.required],nombre:["",a.k.required],clave:["",a.k.required],esAdmin:[]})}ngOnInit(){this.traerTodos()}traerTodos(){this.usuaruiService.listarUsuarios().then(t=>{this.usuarios=t}).catch(t=>console.log(t))}guardar(){}cambiarAdmin(t){}cambiarInput(){this.tipoInput="password"==this.tipoInput?"text":"password"}crearUsuario(){let t={};t.usuario=this.usuarioForm.controls.usuario.value,t.nombre=this.usuarioForm.controls.nombre.value,t.clave=this.usuarioForm.controls.clave.value,t.esAdmin=this.usuarioForm.controls.esAdmin.value,this.usuaruiService.registrarUsuario(t).then(o=>{this._sweetService.success(`Usuario ${t.usuario} creado!`),this.usuarioForm.reset(),this.traerTodos()}).catch(t=>{this._sweetService.danger(t.error.msg)})}borrar(t){console.log(t)}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(a.c),c.Jb(S.a),c.Jb(v.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-lista-usuarios"]],decls:56,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup","ngSubmit"],[1,"col"],[1,"form-group"],["type","text","placeholder","Usuario","name","usuario","formControlName","usuario",1,"form-control","input-placeholder"],["type","text","placeholder","Nombre","name","nombre","formControlName","nombre",1,"form-control","input-placeholder"],[1,"input-group","mb-3"],["placeholder","Contrase\xf1a","formControlName","clave",1,"form-control"],["id","basic-addon2",1,"input-group-text",3,"click"],["class","menu-icon fas fa-eye",4,"ngIf"],["class","menu-icon fas fa-eye-slash",4,"ngIf"],[1,"form-check"],["type","checkbox","name","esAdmin","formControlName","esAdmin",1,"form-check-input"],["for","flexCheckDisabled",1,"form-check-label"],[1,"col","mt-auto"],[1,"btn","btn-success",3,"disabled","click"],[1,"container"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"menu-icon","fas","fa-eye"],[1,"menu-icon","fas","fa-eye-slash"],["scope","row"],["type","checkbox",3,"checked","change"],[2,"color","red"],[1,"text-rpimary","far","fa-trash-alt","fa-2x",3,"click"]],template:function(t,o){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"div",2),c.Mb(3,"div",3),c.Mb(4,"h4",4),c.fc(5,"Lista de usuarios"),c.Lb(),c.Kb(6,"hr"),c.Mb(7,"form",5),c.Tb("ngSubmit",function(){return o.guardar()}),c.Mb(8,"div",0),c.Mb(9,"div",6),c.Mb(10,"div",7),c.Mb(11,"label"),c.fc(12,"Usuario"),c.Lb(),c.Kb(13,"input",8),c.Lb(),c.Lb(),c.Mb(14,"div",6),c.Mb(15,"div",7),c.Mb(16,"label"),c.fc(17,"Nombre"),c.Lb(),c.Kb(18,"input",9),c.Lb(),c.Lb(),c.Mb(19,"div",6),c.Mb(20,"div",7),c.Mb(21,"label"),c.fc(22,"Contrase\xf1a"),c.Lb(),c.Mb(23,"div",10),c.Kb(24,"input",11),c.Mb(25,"span",12),c.Tb("click",function(){return o.cambiarInput()}),c.ec(26,z,1,0,"i",13),c.ec(27,F,1,0,"i",14),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(28,"div",6),c.Mb(29,"div",15),c.Kb(30,"input",16),c.Mb(31,"label",17),c.fc(32," Es admin? "),c.Lb(),c.Lb(),c.Lb(),c.Mb(33,"div",18),c.Mb(34,"div",7),c.Mb(35,"button",19),c.Tb("click",function(){return o.crearUsuario()}),c.fc(36,"Crear"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Kb(37,"hr"),c.Lb(),c.Mb(38,"div",20),c.Mb(39,"div",0),c.Mb(40,"div",21),c.Mb(41,"table",22),c.Mb(42,"thead"),c.Mb(43,"tr"),c.Mb(44,"th",23),c.fc(45,"ID"),c.Lb(),c.Mb(46,"th",23),c.fc(47,"Nombre"),c.Lb(),c.Mb(48,"th",23),c.fc(49,"Usuario"),c.Lb(),c.Mb(50,"th",23),c.fc(51," Es admin? "),c.Lb(),c.Mb(52,"th",23),c.fc(53," borrar "),c.Lb(),c.Lb(),c.Lb(),c.Mb(54,"tbody"),c.ec(55,P,12,4,"tr",24),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(7),c.Yb("formGroup",o.usuarioForm),c.zb(17),c.Ab("type",o.tipoInput),c.zb(2),c.Yb("ngIf","password"==o.tipoInput),c.zb(1),c.Yb("ngIf","password"!=o.tipoInput),c.zb(8),c.Yb("disabled",o.usuarioForm.invalid),c.zb(20),c.Yb("ngForOf",o.usuarios))},directives:[a.m,a.g,a.e,a.b,a.f,a.d,e.k,a.a,e.j],styles:[""]}),t})(),O=(()=>{class t{constructor(t){this._http=t}listarVentas(){return this._http.get(`${m.a}/ventas/`).toPromise()}crearVenta(t){return this._http.post(`${m.a}/ventas/crear`,Object.assign({},t)).toPromise()}cambiarEstado(t,o){return this._http.put(`${m.a}/ventas/cambiarEstado/${o}`,{estado:t}).toPromise()}}return t.\u0275fac=function(o){return new(o||t)(c.Qb(M.b))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const T=["inputBuscar"];function x(t,o){if(1&t&&(c.Mb(0,"a",26),c.fc(1),c.Lb()),2&t){const t=o.$implicit,r=o.index;c.zb(1),c.jc(" #",r+1," ",t.producto.marca," - ",t.producto.modelo," - ",t.gusto.sabor," - ",t.cantidad," ")}}const K=function(t,o){return{"btn-warning":t,"btn-success":o}};function I(t,o){if(1&t){const t=c.Nb();c.Mb(0,"tr"),c.Mb(1,"th",16),c.fc(2),c.Lb(),c.Mb(3,"td"),c.fc(4),c.Lb(),c.Mb(5,"td"),c.fc(6),c.Lb(),c.Mb(7,"td"),c.fc(8),c.Lb(),c.Mb(9,"td"),c.fc(10),c.Lb(),c.Mb(11,"td"),c.fc(12),c.Lb(),c.Mb(13,"td"),c.fc(14),c.Lb(),c.Mb(15,"td"),c.Mb(16,"div",17),c.Mb(17,"button",18),c.Kb(18,"i",19),c.fc(19),c.Lb(),c.Mb(20,"div",20),c.Mb(21,"a",21),c.Tb("click",function(){c.bc(t);const r=o.$implicit;return c.Vb().cambiarEstado("Pendiente",r.id)}),c.fc(22," Pendiente "),c.Lb(),c.Mb(23,"a",21),c.Tb("click",function(){c.bc(t);const r=o.$implicit;return c.Vb().cambiarEstado("Entregado",r.id)}),c.fc(24," Entregado "),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(25,"td"),c.Mb(26,"div",22),c.Mb(27,"button",23),c.Kb(28,"i",24),c.fc(29," Ver"),c.Lb(),c.Mb(30,"div",20),c.ec(31,x,2,5,"a",25),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=o.$implicit;c.zb(2),c.gc(t.id),c.zb(2),c.gc(t.cliente),c.zb(2),c.hc(" ",t.metodo_pago," "),c.zb(2),c.hc(" ",t.precio," "),c.zb(2),c.hc(" ",t.ingreso," "),c.zb(2),c.hc(" ",t.venta_dolar," "),c.zb(2),c.hc(" ",t.usuario.nombre," "),c.zb(3),c.Yb("ngClass",c.Zb(10,K,"Pendiente"==t.estado,"Entregado"==t.estado)),c.zb(2),c.hc(" ",t.estado," "),c.zb(12),c.Yb("ngForOf",t.productos)}}let Y=(()=>{class t{constructor(t,o,r){this.ventasService=t,this.sweetService=o,this.zone=r,this.ventasTabla=[]}ngOnInit(){this.traerVentas()}traerVentas(){this.ventasService.listarVentas().then(t=>{this.ventas=t,this.ventasTabla=this.ventas})}buscar(){this.ventasTabla=this.ventas.filter(t=>""==this.cntrolBuscar.nativeElement.value||t.cliente.toLowerCase().includes(String(this.cntrolBuscar.nativeElement.value).toLowerCase())||t.metodo_pago.toLowerCase().includes(String(this.cntrolBuscar.nativeElement.value).toLowerCase())||t.usuario.nombre.toLowerCase().includes(String(this.cntrolBuscar.nativeElement.value).toLowerCase())?t:void 0)}cambiarEstado(t,o){if(!o)return;let r=null;this.ventas.map(e=>{e.id==o&&t!=e.estado&&(r=this.ventasTabla.indexOf(e),this.ventasService.cambiarEstado(t,o).then(t=>{r?(e.estado=t.estado,this.ventasTabla[r].estado=t.estado):this.traerVentas(),this.sweetService.success("Estado de la venta actualizado")}).catch(t=>{this.sweetService.danger(t.error.msg)}))})}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(O),c.Jb(v.a),c.Jb(c.A))},t.\u0275cmp=c.Db({type:t,selectors:[["app-lista-ventas"]],viewQuery:function(t,o){if(1&t&&c.kc(T,1),2&t){let t;c.ac(t=c.Ub())&&(o.cntrolBuscar=t.first)}},decls:43,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"pb-2","text-end"],[1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-sync-alt"],[1,"card"],[1,"card-body"],[1,"row","justify-content-between","row-cols-auto"],[1,"col"],[1,"col-auto"],["placeholder","Buscar...","type","text",1,"form-control",3,"keyup"],["inputBuscar",""],[1,"table-responsive"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn-group"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn",3,"ngClass"],[1,"fas","fa-caret-down"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"btn-group","dropleft"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-primary"],[1,"fas","fa-caret-left"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"dropdown-item"]],template:function(t,o){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"div",2),c.Mb(3,"button",3),c.Tb("click",function(){return o.traerVentas()}),c.Kb(4,"i",4),c.fc(5," Actualizar"),c.Lb(),c.Lb(),c.Mb(6,"div",5),c.Mb(7,"div",6),c.Mb(8,"div",7),c.Mb(9,"div",8),c.Mb(10,"h4"),c.fc(11,"Lista de ventas"),c.Lb(),c.Lb(),c.Mb(12,"div",9),c.Mb(13,"h5"),c.fc(14),c.Lb(),c.Lb(),c.Lb(),c.Mb(15,"div"),c.Mb(16,"input",10,11),c.Tb("keyup",function(){return o.buscar()}),c.Lb(),c.Lb(),c.Mb(18,"div",0),c.Mb(19,"div",12),c.Mb(20,"table",13),c.Mb(21,"thead"),c.Mb(22,"tr"),c.Mb(23,"th",14),c.fc(24,"#"),c.Lb(),c.Mb(25,"th",14),c.fc(26,"Cliente"),c.Lb(),c.Mb(27,"th",14),c.fc(28,"Metodo de pago"),c.Lb(),c.Mb(29,"th",14),c.fc(30,"Total"),c.Lb(),c.Mb(31,"th",14),c.fc(32,"Ingreso"),c.Lb(),c.Mb(33,"th",14),c.fc(34,"Venta dolar"),c.Lb(),c.Mb(35,"th",14),c.fc(36,"Vendedor"),c.Lb(),c.Mb(37,"th",14),c.fc(38,"Estado"),c.Lb(),c.Mb(39,"th",14),c.fc(40,"Productos"),c.Lb(),c.Lb(),c.Lb(),c.Mb(41,"tbody"),c.ec(42,I,32,13,"tr",15),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(14),c.hc("Total: ",o.ventasTabla.length,""),c.zb(28),c.Yb("ngForOf",o.ventasTabla))},directives:[e.j,e.i],styles:[""]}),t})();function j(t,o){if(1&t&&(c.Mb(0,"option",33),c.fc(1),c.Lb()),2&t){const t=o.$implicit;c.Yb("selected",0==o.index)("value",t.id),c.zb(1),c.ic("",t.marca,"- ",t.modelo,"")}}function _(t,o){if(1&t&&(c.Mb(0,"option",34),c.fc(1),c.Lb()),2&t){const t=o.$implicit;c.Yb("value",t.id),c.zb(1),c.gc(t.sabor)}}function E(t,o){if(1&t&&(c.Mb(0,"option",34),c.fc(1),c.Lb()),2&t){const t=o.$implicit;c.Yb("value",t),c.zb(1),c.gc(t)}}function G(t,o){if(1&t&&(c.Mb(0,"td"),c.fc(1),c.Lb()),2&t){const t=c.Vb().$implicit;c.zb(1),c.hc(" ",t.mayorista," ")}}function N(t,o){if(1&t&&(c.Mb(0,"td"),c.fc(1),c.Lb()),2&t){const t=c.Vb().$implicit;c.zb(1),c.hc(" ",t.minorista," ")}}function $(t,o){if(1&t){const t=c.Nb();c.Mb(0,"tr"),c.Mb(1,"th",35),c.fc(2),c.Lb(),c.Mb(3,"td"),c.fc(4),c.Lb(),c.Mb(5,"td"),c.fc(6),c.Lb(),c.Mb(7,"td"),c.fc(8),c.Lb(),c.Mb(9,"td"),c.fc(10),c.Lb(),c.ec(11,G,2,1,"td",31),c.ec(12,N,2,1,"td",31),c.Mb(13,"td"),c.fc(14),c.Lb(),c.Mb(15,"td"),c.Mb(16,"span",36),c.Mb(17,"i",37),c.Tb("click",function(){c.bc(t);const r=o.$implicit;return c.Vb().borrar(r)}),c.Lb(),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=o.$implicit,r=o.index,e=c.Vb();c.zb(2),c.gc(r+1),c.zb(2),c.gc(t.marca),c.zb(2),c.hc(" ",t.modelo," "),c.zb(2),c.hc(" ",null==t.gusto?null:t.gusto.sabor," "),c.zb(2),c.hc(" ",t.cantidad," "),c.zb(1),c.Yb("ngIf",e.ventaForm.controls.esMayorista.value),c.zb(1),c.Yb("ngIf",!e.ventaForm.controls.esMayorista.value),c.zb(2),c.hc(" ",t.total," ")}}function A(t,o){1&t&&(c.Mb(0,"div"),c.Kb(1,"i",38),c.fc(2,"Agregar"),c.Lb())}function V(t,o){1&t&&(c.Mb(0,"div"),c.Kb(1,"i",39),c.fc(2,"Enviando..."),c.Lb())}const D=[{path:"",component:h,children:[{path:"",component:(()=>{class t{constructor(t,o,r){this.fb=t,this.prodcutosService=o,this.ventasService=r,this.cargando=!1,this.productos=[],this.produtosStock=[],this.cantidadStock=[],this.productoGustos=[],this.ventaForm=this.fb.group({cliente:["",a.k.required],pago:["",a.k.required],ingreso:["",[a.k.required,a.k.min(0)]],esMayorista:[],esDolar:[]})}ngOnInit(){this.traerProductos()}traerProductos(){this.prodcutosService.traerTodos().subscribe(t=>{t.length>0&&(this.produtosStock=t,this.cargarProductoDefault())})}cargarProductoDefault(){this.producto=this.produtosStock[0],this.producto.gustos.length>0&&(this.productoGustos=this.producto.gustos,this.producto.gusto=this.productoGustos[0]),this.asignarStock()}cambiarProducto(t){this.produtosStock.map(o=>{o.id==t.target.value&&(this.producto=o,this.producto.gustos.length>0&&(this.productoGustos=this.producto.gustos,this.producto.gusto=this.productoGustos[0],this.asignarStock()))})}cambiarSabor(t){this.producto&&(this.productoGustos.map(o=>{o.id==t.target.value&&(this.producto.gusto=o)}),this.asignarStock())}asignarStock(){if(this.cantidadStock=[],this.producto&&this.producto.gusto)for(let t=1;t<=this.producto.gusto.stock;t++)this.cantidadStock.push(t);this.producto.cantidad=1}cambiarCantidad(t){this.producto&&(this.producto.cantidad=parseInt(t.target.value.toString()))}calcularTotalPorProducto(){this.productos.map(t=>{t.total=0,this.ventaForm.controls.esMayorista.value?(null==t?void 0:t.cantidad)&&t.mayorista&&(t.total=parseFloat((parseInt(t.cantidad.toString())*parseFloat(t.mayorista.toString())).toString())):(null==t?void 0:t.cantidad)&&t.minorista&&(console.log(t),t.total=parseFloat((parseInt(t.cantidad.toString())*parseFloat(t.minorista.toString())).toString()))})}agregarProducto(){if(this.producto){let t=!0;this.productos.map(o=>{var r,e,a,b;o.id==(null===(r=this.producto)||void 0===r?void 0:r.id)&&(null===(e=o.gusto)||void 0===e?void 0:e.id)==(null===(b=null===(a=this.producto)||void 0===a?void 0:a.gusto)||void 0===b?void 0:b.id)&&this.producto.cantidad&&o.cantidad&&(o.cantidad+=parseInt(this.producto.cantidad.toString()),t=!1)}),t&&this.productos.push(Object.assign({},this.producto)),this.calcularTotalPorProducto()}}borrar(t){this.productos=this.productos.filter(o=>{var r,e;if(o.id!=t.id||(null===(r=o.gusto)||void 0===r?void 0:r.id)!=(null===(e=t.gusto)||void 0===e?void 0:e.id))return o})}sumaTotal(){let t=0;return this.productos.map(o=>{t+=parseFloat(o.total.toString())}),t}borrarTodo(){this.ventaForm.reset(),this.productos=[]}guardar(){let t={};t.cliente=this.ventaForm.controls.cliente.value,t.metodo_pago=this.ventaForm.controls.pago.value,t.ingreso=this.ventaForm.controls.ingreso.value,t.esDolar=this.ventaForm.controls.esDolar.value,t.total=this.sumaTotal(),t.productos=this.productos,this.ventasService.crearVenta(t).then(t=>{this.borrarTodo(),this.traerProductos()}).catch(t=>{console.log(t)})}}return t.\u0275fac=function(o){return new(o||t)(c.Jb(a.c),c.Jb(L),c.Jb(O))},t.\u0275cmp=c.Db({type:t,selectors:[["app-ventas"]],decls:91,vars:11,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup","ngSubmit"],[1,"col"],[1,"form-group"],["type","text","placeholder","Cliente","name","cliente","formControlName","cliente",1,"form-control","input-placeholder"],["type","text","placeholder","Metodo de pago","name","pago","formControlName","pago",1,"form-control","input-placeholder"],[1,"form-check"],["type","checkbox","name","esMayorista","formControlName","esMayorista",1,"form-check-input"],["for","flexCheckDisabled",1,"form-check-label"],[1,"container"],[1,"row","justify-content-between"],[1,"row","row-cols-auto"],[1,"col","col-lg-4","col-xl-4"],["aria-label","Default select example",1,"form-select",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"col","col-lg-2","col-xl-2"],[1,"col-2","mt-auto"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"table-responsive"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["type","number","placeholder","Ingreso","name","ingreso","formControlName","ingreso",1,"form-control"],["type","checkbox","name","esDolar","formControlName","esDolar",1,"form-check-input"],[1,"col","align-self-start"],["type","submit",1,"btn","btn-success","mr-2",3,"disabled"],[4,"ngIf"],[1,"btn","btn-outline-danger",3,"click"],[3,"selected","value"],[3,"value"],["scope","row"],[2,"color","red"],[1,"text-rpimary","far","fa-trash-alt","fa-2x",3,"click"],[1,"fa","fa-save"],[1,"fa","fa-spin","fa-sync"]],template:function(t,o){1&t&&(c.Mb(0,"div",0),c.Mb(1,"div",1),c.Mb(2,"div",2),c.Mb(3,"div",3),c.Mb(4,"h4",4),c.fc(5,"Generar venta"),c.Lb(),c.Mb(6,"form",5),c.Tb("ngSubmit",function(){return o.guardar()}),c.Mb(7,"div",0),c.Mb(8,"div",6),c.Mb(9,"div",7),c.Mb(10,"label"),c.fc(11,"Cliente"),c.Lb(),c.Kb(12,"input",8),c.Lb(),c.Lb(),c.Mb(13,"div",6),c.Mb(14,"div",7),c.Mb(15,"label"),c.fc(16,"Pago"),c.Lb(),c.Kb(17,"input",9),c.Lb(),c.Lb(),c.Mb(18,"div",6),c.Mb(19,"div",10),c.Kb(20,"input",11),c.Mb(21,"label",12),c.fc(22," Es mayorista? "),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Kb(23,"hr"),c.Mb(24,"div",13),c.Mb(25,"div",14),c.Mb(26,"div",15),c.Mb(27,"div",16),c.Mb(28,"label"),c.fc(29,"Producto"),c.Lb(),c.Mb(30,"select",17),c.Tb("change",function(t){return o.cambiarProducto(t)}),c.ec(31,j,2,4,"option",18),c.Lb(),c.Lb(),c.Mb(32,"div",16),c.Mb(33,"label"),c.fc(34,"Sabor"),c.Lb(),c.Mb(35,"select",17),c.Tb("change",function(t){return o.cambiarSabor(t)}),c.ec(36,_,2,2,"option",19),c.Lb(),c.Lb(),c.Mb(37,"div",20),c.Mb(38,"label"),c.fc(39,"Cantidad"),c.Lb(),c.Mb(40,"select",17),c.Tb("change",function(t){return o.cambiarCantidad(t)}),c.ec(41,E,2,2,"option",19),c.Lb(),c.Lb(),c.Mb(42,"div",21),c.Kb(43,"label"),c.Mb(44,"button",22),c.Tb("click",function(){return o.agregarProducto()}),c.fc(45,"Agregar"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(46,"div",0),c.Mb(47,"div",23),c.Mb(48,"table",24),c.Mb(49,"thead"),c.Mb(50,"tr"),c.Mb(51,"th",25),c.fc(52,"#"),c.Lb(),c.Mb(53,"th",25),c.fc(54,"Marca"),c.Lb(),c.Mb(55,"th",25),c.fc(56,"Modelo"),c.Lb(),c.Mb(57,"th",25),c.fc(58,"Sabor"),c.Lb(),c.Mb(59,"th",25),c.fc(60,"Cantidad"),c.Lb(),c.Mb(61,"th",25),c.fc(62,"Precio unit"),c.Lb(),c.Mb(63,"th",25),c.fc(64,"Total"),c.Lb(),c.Mb(65,"th",25),c.fc(66,"Borrar"),c.Lb(),c.Lb(),c.Lb(),c.Mb(67,"tbody"),c.ec(68,$,18,8,"tr",26),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(69,"div",7),c.Mb(70,"label"),c.fc(71,"Ingreso"),c.Lb(),c.Kb(72,"input",27),c.Mb(73,"p"),c.fc(74," Debe de ser un monto positivo "),c.Lb(),c.Mb(75,"div",10),c.Kb(76,"input",28),c.Mb(77,"label",12),c.fc(78," La venta es en dolares? "),c.Lb(),c.Lb(),c.Lb(),c.Kb(79,"hr"),c.Mb(80,"div",0),c.Mb(81,"div"),c.Mb(82,"div",29),c.Mb(83,"h3"),c.fc(84),c.Wb(85,"currency"),c.Lb(),c.Mb(86,"button",30),c.ec(87,A,3,0,"div",31),c.ec(88,V,3,0,"div",31),c.Lb(),c.Mb(89,"button",32),c.Tb("click",function(){return o.borrarTodo()}),c.fc(90,"Borrar todo"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.zb(6),c.Yb("formGroup",o.ventaForm),c.zb(25),c.Yb("ngForOf",o.produtosStock),c.zb(5),c.Yb("ngForOf",null==o.producto?null:o.producto.gustos),c.zb(5),c.Yb("ngForOf",o.cantidadStock),c.zb(27),c.Yb("ngForOf",o.productos),c.zb(16),c.hc("Total: ",c.Xb(85,9,o.sumaTotal()),""),c.zb(2),c.Yb("disabled",o.ventaForm.invalid),c.zb(1),c.Yb("ngIf",!o.cargando),c.zb(1),c.Yb("ngIf",o.cargando))},directives:[a.m,a.g,a.e,a.b,a.f,a.d,a.a,e.j,a.i,e.k,a.h,a.l],pipes:[e.c],styles:["input[_ngcontent-%COMP%]::placeholder{color:#bebaba}"]}),t})()},{path:"agregar",component:k},{path:"lista",component:w},{path:"venta-lista",component:Y},{path:"usuarios",component:C}]}];let J=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(o){return new(o||t)},imports:[[b.c.forChild(D)],b.c]}),t})(),q=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(o){return new(o||t)},imports:[[e.b,b.c]]}),t})(),B=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(o){return new(o||t)},imports:[[e.b,J,q,a.j]]}),t})()}}]);